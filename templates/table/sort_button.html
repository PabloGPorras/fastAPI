<a href="#" class="btn btn-link sort-btn" data-column="{{ key }}" data-order="asc" onclick="handleSort(event, this)">
    <span id="sort-{{ key }}" class="sort-icon">⬆</span>
</a>

<script>
    // Handle sorting logic
    function handleSort(event, button) {
        event.preventDefault(); // Prevent default link behavior

        const column = button.dataset.column; // Get the column being sorted
        const currentOrder = button.dataset.order; // Get the current sort order
        const rows = Array.from(document.querySelectorAll("#tableBody tr")); // Get all rows in the table body

        // Check if the column contains numeric values
        const isNumeric = rows.some((row) => {
            const cell = row.querySelector(`.${column}-column`);
            return cell && !isNaN(parseFloat(cell.textContent));
        });

        // Sort the rows based on the current order
        rows.sort((a, b) => {
            const aValue = a.querySelector(`.${column}-column`).textContent.trim();
            const bValue = b.querySelector(`.${column}-column`).textContent.trim();
            return isNumeric
                ? currentOrder === "asc"
                    ? parseFloat(aValue) - parseFloat(bValue)
                    : parseFloat(bValue) - parseFloat(aValue)
                : currentOrder === "asc"
                    ? aValue.localeCompare(bValue)
                    : bValue.localeCompare(aValue);
        });

        // Append the sorted rows back to the table body
        rows.forEach((row) => document.querySelector("#tableBody").appendChild(row));

        // Toggle the sort order
        const newOrder = currentOrder === "asc" ? "desc" : "asc";
        button.dataset.order = newOrder;

        // Update the sort icon
        const icon = button.querySelector(".sort-icon");
        icon.textContent = newOrder === "asc" ? "⬆" : "⬇";

        // Reset other sort icons (optional)
        document.querySelectorAll(".sort-btn .sort-icon").forEach((otherIcon) => {
            if (otherIcon !== icon) {
                otherIcon.textContent = "⬆"; // Default to ascending icon
            }
        });
    }
</script>
