{% for field in form_fields %}
<div class="mb-3">
    <label for="{{ field.name }}" class="form-label">{{ field.name|capitalize }}</label>
    {% if field.options %}
    <!-- Dropdown for predefined options -->
    <select class="form-select" id="{{ field.name }}" name="{{ field.name }}" required>
        {% for option in field.options %}
        <option value="{{ option }}">{{ option }}</option>
        {% endfor %}
    </select>
    {% elif "INTEGER" in field.type %}
    <!-- Number input -->
    <input type="number" class="form-control" id="{{ field.name }}" name="{{ field.name }}" required>
    {% elif "DATE" in field.type %}
    <!-- Date input -->
    <input type="date" class="form-control" id="{{ field.name }}" name="{{ field.name }}" required>
    {% elif "DATETIME" in field.type %}
    <!-- DateTime input -->
    <input type="datetime-local" class="form-control" id="{{ field.name }}" name="{{ field.name }}" required>
    {% elif "TIME" in field.type %}
    <!-- Time input -->
    <input type="time" class="form-control" id="{{ field.name }}" name="{{ field.name }}" required>
    {% elif "BOOLEAN" in field.type %}
    <!-- Boolean input -->
    <select class="form-select" id="{{ field.name }}" name="{{ field.name }}" required>
        <option value="true">True</option>
        <option value="false">False</option>
    </select>
    {% elif "FLOAT" in field.type or "DECIMAL" in field.type %}
    <!-- Float/Decimal input -->
    <input type="number" class="form-control" id="{{ field.name }}" name="{{ field.name }}" step="0.01" required>
    {% else %}
    <!-- Text input (default) -->
    <input type="text" class="form-control" id="{{ field.name }}" name="{{ field.name }}" required>
    {% endif %}
</div>
{% endfor %}

<!-- Dynamically generate relationship subtables -->
{% for relationship in relationships if relationship.name != "comments" %}
<h5>{{ relationship.name|capitalize }}</h5>
<div id="{{ relationship.name }}-container" class="relationship-container">
    <!-- Subtable header -->
    <table class="table">
        <thead>
            <tr>
                {% for field in relationship.fields if field.name not in ["id", "request_id"] %}
                <th>{{ field.name|capitalize }}</th>
                {% endfor %}
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <!-- Rows will be dynamically added here -->
        </tbody>
    </table>
    <button type="button" class="btn btn-secondary btn-sm mt-2 add-row-btn"
        data-relationship="{{ relationship.name }}">Add {{ relationship.name|capitalize }}</button>
</div>
{% endfor %}

<div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
    <button type="submit" class="btn btn-primary">Save</button>
</div>
